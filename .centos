#!/bin/bash

#check permission
if [ $(id -u) != '0' ]; then
	echo 'Error: You must be root to run this script'
	exit 1
fi

#config
cur_dir=${pwd}
node_ver='0.10.21'
pcre_ver='8.33'
nginx_ver='1.4.3'

#installer
function installer(){
  wget -c $3
  tar zxvf $2
  cd $1
  ./configure
  make && make install
  cd ..
  rm -rf $1
  rm -f $2
}

#back to uer's directory
cd

echo '================== yum tools && update && upgrade ==================';
yum install -y vim* make gcc gcc-c++ wget curl curl-devel openssl openssl-devel git-core
yum update -y
yum upgrade -y

echo '================== nodejs ==================';
name="node-v${node_ver}"
tar="${name}.tar.gz"
installer ${name} ${tar} "http://nodejs.org/dist/v${node_ver}/${tar}"

echo '================== grunt-cli ==================';
npm install -g grunt-cli

echo '================== pcre ==================';
name="pcre-${pcre_ver}"
tar="${name}.tar.gz"
installer ${name} ${tar} "ftp://ftp.csx.cam.ac.uk/pub/software/programming/pcre/${tar}"

echo '================== nginx ==================';
name="nginx-${nginx_ver}"
tar="${name}.tar.gz"
installer ${name} ${tar} "http://nginx.org/download/${tar}"