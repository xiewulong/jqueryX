#!/bin/bash

bin=/usr/local/nginx/sbin/nginx
cfg=-p
ngx=~/nginx
pid=${ngx}/nginx.pid

[ -n "$2" ] && cfg=$2
[ -n "$3" ] && ngx=$3
[ -n "$4" ] && pid=$4

case $1 in
	start)
		${bin} ${cfg} ${ngx} && echo 'nginx is already running.'
		;;
	stop)
		kill -QUIT `cat ${pid}` && echo 'nginx stops.'
		;;
	restart | reload)
		kill -HUP `cat ${pid}` && echo 'nginx reloaded.'
		;;
	pid)
		echo `cat ${pid}`
		;;
	*)
		echo "Usage: $0 {start|stop|restart|reload|pid}"
		exit 1;
		;;
esac