/*!
 * jQuery X Plugin v1.0
 * author: xiewulong
 * create: 2013/5/16
 * update: 2013/11/5
 */

!function(a,b){var c=function(c){var f=c(a),g=c(d),h=function(){};return c.fn.extend({x:"1.0",scrolls:function(a){return this.each(function(){function n(c,d){var c=c||event,k=(d||(c.wheelDelta?c.wheelDelta:40*-c.detail))/2,n=j.position().top+k,o=l.height()-j.height(),p=f.height()||0,q=b.height()-p-(g.height()||0)-e.height();o>n&&(n=o),n>0&&(n=0),j.css({top:n}),e.css({top:n/o*q+p}),i[0>n?"show":"hide"](),(a||h).call(m,n>=o),c.preventDefault?c.preventDefault():event.returnValue=!1}var b,e,f,g,i,j,k,l=c(this),m=this;0==l.find(".scroll").size()&&(k=m.innerHTML,l.html('<div class="scroll_c"></div><div class="scroll"><a href="javascript:;" class="up">\u25b2</a><a href="javascript:;" class="scroller"></a><a href="javascript:;" class="down">\u25bc</a></div><a href="javascript:;" class="gotop"></a>').find(".scroll_c").html(k)),b=l.find(".scroll"),e=b.find(".scroller"),f=b.find(".up"),g=b.find(".down"),i=l.find(".gotop"),j=l.find(".scroll_c"),e.get(0).onmousedown=function(e){var e=e||event,k=c(this),n=e.clientY-k.position().top;return d.onmousemove=function(c){var c=c||event,d=c.clientY-n,e=j.height(),o=b.height()-(g.height()||0)-k.height(),p=f.height()||0;return d>o&&(d=o),p>d&&(d=p),k.css({top:d}),j.css({top:-((d-p)/(o-p))*(e-l.height())}),i[d>0?"show":"hide"](),(a||h).call(m,d>=o),!1},d.onmouseup=function(){return d.onmousemove=d.onmouseup=null,!1},!1},i.on("click",function(){j.css({top:0}),e.css({top:f.height()||0}),touch(this).hide()}),f.on("click",function(a){n(a,120)}),g.on("click",function(a){n(a,-120)}),m.onmouseover=function(){"onmousewheel"in this?this.onmousewheel=n:(this.removeEventListener("DOMMouseScroll",n,!1),this.addEventListener("DOMMouseScroll",n,!1))}}).fixScrolls()},fixScrolls:function(){return this.each(function(){var a=c(this),b=a.find(".scroll"),d=b.find(".scroller"),e=a.height(),f=this.scrollHeight;d.height((b.height()-(b.find(".up").height()||0)-(b.find(".down").height()||0))*e/f),b[f>e?"show":"hide"](),e>=f&&(d.css({top:0}),a.find(".scroll_c").css({top:0}))})},checkAll:function(a,b,d){function i(){var a=!0;return e.each(function(){!this.checked&&(a=!1)}),a}var e=c(a),f=c(this.selector+","+a),b=b||h,d=d||b,g=this;return e.change(function(){var a=i();g.prop("checked",a),d.call(this,a)}),this.change(function(){var a=this.checked;f.prop("checked",a),b.call(this,a)})},checkboxs:function(a,d){return a===b&&(a="on"),"function"==typeof a&&(d=a,a="on"),this.on("click",function(){c(this).toggleClass(a),(d||h).call(this)})},radios:function(a,d){var e=this;return a===b&&(a="on"),"function"==typeof a&&(d=a,a="on"),this.on("click",function(){e.removeClass(a),c(this).addClass(a),(d||h).call(this)})},selects:function(a){var d,e,f={parent:"",trigger:"",disabled:"disabled",span:"span",p:"p",a:"a",onW:"",onS:"",onA:"",animation:"",duration:100,toggle:!0,fn:!1,fnA:!1},i=this;return c.extend(f,a),d=i.find(f.p),(f.parent?c(f.parent):g).on("click",e=function(){switch(f.animation){case"slide":d.stop().slideUp(f.duration);break;case"fade":d.stop().fadeOut(f.duration);break;default:d.hide()}f.onW&&i.removeClass(f.onW)}),this.each(function(){var a=c(this),d=a.find(f.trigger||f.span),g=a.find(f.span),i=a.find(f.p),j=i.find(f.a);d.off().on("click",function(b){if(!(a.hasClass(f.disabled)||f.toggle&&"none"!==i.css("display"))){switch(e(),f.animation){case"slide":i.stop().slideDown(f.duration);break;case"fade":i.stop().fadeIn(f.duration);break;default:i.show()}f.onW&&a.addClass(f.onW),(f.fn||h).call(a.get(0)),b.stopPropagation()}}),j.off().on("click",function(a){var d=c(this),e=g.get(0).tagName.toUpperCase(),i=(f.fnA||h).call(this);i===!1?a.stopPropagation():(i===b&&(i=d.text()),"INPUT"==e||"TEXTAREA"==e?g.val(i):g.html(i),f.onS&&g.addClass(f.onS),f.onA&&(j.removeClass(f.onA),d.addClass(f.onA)))}),f.onA&&j.each(function(){var a=c(this),b=a.text(),d=g.get(0).tagName.toUpperCase(),e="INPUT"==d||"TEXTAREA"==d?g.val():g.text();e==b&&a.addClass(f.onA)})})},tabs:function(a,d,e,f,g){"function"==typeof d&&(g=d,d="on"),"function"==typeof e&&(g=e,e=b),"function"==typeof f&&(g=f,f=0),!e&&("click"==d||"hover"==d)&&(e=d),f===b&&(f=0);var i,j="hover"==e?"mouseover":"click",k=this;return(i=function(b){var e=c(a);k.removeClass(d).eq(b).addClass(d),e.hide().eq(b).show(),(g||h).call(k.get(b),b,e.get(b))})(f),this.each(function(a){c(this).on(j,function(){i(a)})})},imgLoad:function(a,c){return a===b&&(a="_src"),"function"==typeof a&&(c=a,a="_src"),this.each(function(b){var d=new Image,e=this.src||"",f=this.getAttribute(a),g=this;"IMG"==this.tagName.toUpperCase()&&f&&(d.onload=function(){g.src=this.src,g.setAttribute(a,e),(c||h).call(g,this,b)},d.src=f)})},inputIn:function(a,b){return b&&(a=b[0]+a+b[1]),this.each(function(){var b,c,e,f,g,h=this.value;this.getAttribute("_range")?(g=this.getAttribute("_range").split("|"),b=parseInt(g[0]),c=b+parseInt(g[1])):(b=this.selectionStart,c=this.selectionEnd),e=b+a.length,this.value=h.slice(0,b)+a+h.slice(c),this.focus(),d.selection?(this.setAttribute("_range",e+"|0"),f=d.selection.createRange(),f.moveStart("character",e-this.value.length),f.collapse(!0),f.select()):this.setSelectionRange(e,e)})},limit:function(a,b){return this.each(function(){var d=c(this),e=d.val(),f=c.textSize(e)/2;"function"==typeof b?b.call(this,Math.floor(a-f)):f>a&&d.val(c.textSize(e,2*a))})},inputs:function(a){function j(){var a,b=c(this),d=b.val(),e=h.defV&&b.attr(h.defV)||this.defaultValue,f=c.textSize(d)/2;e&&d==e&&l(e)||(a="number"==typeof h.limit?h.limit:b.attr(h.limit)?parseInt(b.attr(h.limit)):140,"function"==typeof h.fn?h.fn.call(this,Math.floor(a-f)):f>a&&b.val(c.textSize(d,2*a)))}function k(){if(d.selection){var a,e=d.selection.createRange(),f=c(this),g=this.value,h=g.length,i=e.text.length,j=0;c.ie(8),e.moveStart("character",-h),a=e.text;for(var l=0,m=a.length;m>l&&-1!=g.indexOf(a.slice(-(l+1)));l++);f.attr("_range",l-i+j+"|"+i)}}function l(a){return 0==h.values.length||c.inArray(a,h.values)>=0}var e,f,g,h={parent:"",values:[],defV:"_value",onF:"",onK:"",limit:!1,fn:!1,range:!1},i=c.ltie(10);return c.extend(h,a),g=h.range&&c.ie(),e=h.parent?c(h.parent):this,f=h.parent?this.selector:b,e.on("focus",f,function(){var a=c(this),b=h.defV&&a.attr(h.defV)||this.defaultValue;b&&a.val()==b&&l(b)&&a.val(""),a.addClass(h.onF),h.limit&&j.call(this)}).on("blur",f,function(){var a=c(this),b=a.val(),d=h.defV&&a.attr(h.defV)||this.defaultValue;(""==b||b==d)&&l(d)&&a.val(d).removeClass(h.onF+" "+h.onK),h.limit&&j.call(this)}).on(i?"keyup":"input",f,function(){var a=c(this),b=a.val(),d=h.defV&&a.attr(h.defV)||this.defaultValue;""==b||b==d?a.removeClass(h.onK).addClass(h.onF):a.addClass(h.onK),g&&k.call(this),h.limit&&j.call(this)}),h.limit&&(this.each(j),i&&this.on("paste",j)),g&&e.on("mouseup",f,k),this}}),c.extend({clip:function(b,d){var e,f=c(b).val(),d=d||h;(e=a.clipboardData)?(e.clearData(),e.setData("text",f),d.call(b,!0)):(b.focus(),b.selectionStart=0,b.selectionEnd=f.length,d.call(b,!1))},loader:function(a,b){function d(){if(c.isFunction(a))a();else if(c.isPlainObject(a))for(var b in a)c.isFunction(a[b])&&a[b]()}return b?d():c(d),a},pop:function(a){function o(){var a=m-l.adjust-i,b=n-l.adjust-j;return{left:a<l.left?a<l.adjust?l.adjust:a:l.left<l.adjust?l.adjust:l.left,top:b<l.top?b<l.adjust?l.adjust:b:l.top<l.adjust?l.adjust:l.top}}function p(a){return{marginLeft:(a?f.scrollLeft():0)-i/2,marginTop:(a?f.scrollTop():0)-j/2}}var b,e,i,j,k,l={parent:"body",id:"jq_x_pop",close:"",position:"fixed",top:0,left:0,bg:!0,bgclose:!0,bgcloser:!0,bgcolor:"#000",opacity:.5,zIndex:100,animation:"",duration:400,width:0,height:0,adjust:20,html:"",drag:"",fn:!1,fnC:!1},m=g.width(),n=g.height();if(c.extend(l,a),l.html){if(c.popClose(l.id),l.bg&&c.popBg({parent:l.parent,id:l.id+"_bg",close:l.bgclose?l.close||l.id+"_c":"",bgcolor:l.bgcolor,fade:l.animation?!0:!1,duration:l.duration,opacity:l.opacity,zIndex:l.zIndex-1}),e="display:inline;position:"+l.position+";z-index:"+l.zIndex+";"+(l.animation&&l.width&&l.height?"display:none;":"")+(l.width?"width:"+l.width+"px;":"")+(l.height?"height:"+l.height+"px;":""),l.$pop=c('<div id="'+l.id+'" class="'+l.id+'" style="'+e+'">'+l.html+"</div>").appendTo(l.parent),i=l.width||l.$pop.width(),j=l.height||l.$pop.height(),k="fixed"==l.position?p():p(1),(l.left||l.top)&&"absolute"==l.position&&(b=o()),l.$pop.css({left:l.left?"fixed"==l.position?l.left:b.left:"50%",marginLeft:l.left?"":k.marginLeft,top:l.top?"fixed"==l.position?l.top:b.top:"50%",marginTop:l.top?"":k.marginTop}),"fixed"==l.position&&c.ie6(function(){var a;l.$pop.css({position:"absolute"}),(a=function(){k=p(1),l.$pop.css({left:l.left?l.left+f.scrollLeft():"50%",marginLeft:l.left?"":k.marginLeft,top:l.top?l.top+f.scrollTop():"50%",marginTop:l.top?"":k.marginTop})})(),f.resize(a).scroll(a)}),l.animation)switch((!l.width||!l.height)&&l.$pop.hide(),l.animation){case"fade":l.$pop.stop().fadeIn(l.duration)}return l.close="."+(l.close||l.id+"_c"),c(l.close).on("click",function(a){(l.fnC||h).call(l.$pop.get(0)),c.popClose(l.id,l.animation),a.stopPropagation()}),!l.bg&&l.bgcloser&&(g.on("click",function(){l.$pop.remove()}),l.$pop.on("click",function(a){a.stopPropagation()})),l.drag&&l.$pop.find(l.drag).mousedown(function(a){var a=a||event,b=a.clientX,c=a.clientY,e=l.$pop,f=parseInt(e.css("marginLeft")),g=parseInt(e.css("marginTop"));return d.onmousemove=function(a){var a=a||event;return e.css({marginLeft:f+a.clientX-b,marginTop:g+a.clientY-c}),!1},d.onmouseup=function(){return d.onmouseup=d.onmousemove=null,!1},!1}),(l.fn||h).call(l.$pop.get(0),{width:m,height:n,adjust:l.adjust}),l.$pop}},popClose:function(a,b,d){function g(a){c(a||this).remove()}var a="."+a,e=a+"_bg",f=a+","+e;switch(b){case"fade":c(f).stop().fadeOut(d,g);break;default:g(f)}},popBg:function(a){var b,d,e={parent:"body",id:"jq_x_pop_bg",close:"jq_x_pop_c",bgcolor:"#000",fade:!1,duration:400,opacity:.5,zIndex:"99"};return c.extend(e,a),b=e.fade?0:e.opacity,d=0==c("."+e.id).size()?c('<div id="'+e.id+'" class="'+e.id+" "+e.close+'" style="position:fixed;width:100%;height:100%;left:0;top:0;background:'+e.bgcolor+";opacity:"+b+";filter:alpha(opacity="+100*b+");z-index:"+e.zIndex+';"></div>').appendTo(e.parent):c("#"+e.id),e.fade&&d.stop().animate({opacity:e.opacity},e.duration),c.ie6(function(){var a;(a=function(){d.css({position:"absolute",height:f.height(),marginTop:f.scrollTop()})})(),f.resize(a).scroll(a)}),d},textSize:function(a,b){var d=null==a.match(/[^ -~]/g)?a.length:a.length+a.match(/[^ -~]/g).length;if(!b)return d;if(!(d>b))return a;for(var e=0,f=a.length;f>=e;e++)if(c.textSize(a.substring(0,e+1))>b)return a.substring(0,e)},ie6:function(a){var b;return(b=e.userAgent.indexOf("MSIE 6.0")>0)&&(a||h)(),b},ltie:function(a,c){var d,f,g,i=e.userAgent;if(-1!=i.indexOf("MSIE"))return a===b&&(a=9),"function"==typeof a&&(c=a,a=9),d=i.indexOf("MSIE"),g=parseInt(i.slice(d+5,d+7)),(f=a>g)&&(c||h)(),f},ie:function(a,c){var d,f=e.userAgent;return"function"==typeof a&&(c=a,a=b),index=f.indexOf("MSIE"),version=parseInt(f.slice(index+5,index+7)),(d=index>0&&(!a||a==version))&&(c||h)(),d}}),c},d=a.document,e=a.navigator,f=a.jQuery,g=a.define;f&&f().jquery&&c(f),"function"==typeof g&&g.amd&&g(["jquery"],c)}(window);